(self.webpackChunkmarketing_site_gatsby=self.webpackChunkmarketing_site_gatsby||[]).push([[135],{14266:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var o=r(n(67154)),s=r(n(59713)),a=r(n(319)),i=r(n(34575)),l=r(n(78585)),u=r(n(29754)),c=r(n(81506)),d=r(n(93913)),f=r(n(2205)),p=r(n(45697)),h=r(n(67294)),m=r(n(75900)),y=r(n(62470));var v=function(e){function t(e){var n;return(0,i.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this,e))).state={targetItems:[],inViewState:[],isScrolledPast:[]},n._handleSpy=n._handleSpy.bind((0,c.default)(n)),n}return(0,f.default)(t,e),(0,d.default)(t,null,[{key:"propTypes",get:function(){return{items:p.default.arrayOf(p.default.string).isRequired,currentClassName:p.default.string.isRequired,scrolledPastClassName:p.default.string,style:p.default.object,componentTag:p.default.oneOfType([p.default.string,p.default.elementType]),offset:p.default.number,rootEl:p.default.string,onUpdate:p.default.func}}},{key:"defaultProps",get:function(){return{items:[],currentClassName:"",style:{},componentTag:"ul",offset:0,onUpdate:function(){}}}}]),(0,d.default)(t,[{key:"_initSpyTarget",value:function(e){return e.map((function(e){return document.getElementById(e)}))}},{key:"_fillArray",value:function(e,t){for(var n=[],r=0,o=e.length;r<o;r++)n[r]=t;return n}},{key:"_isScrolled",value:function(){return this._getScrollDimension().scrollTop>0}},{key:"_getScrollDimension",value:function(){var e=document,t=this.props.rootEl;return{scrollTop:t?e.querySelector(t).scrollTop:e.documentElement.scrollTop||e.body.parentNode.scrollTop||e.body.scrollTop,scrollHeight:t?e.querySelector(t).scrollHeight:e.documentElement.scrollHeight||e.body.parentNode.scrollHeight||e.body.scrollHeight}}},{key:"_getElemsViewState",value:function(e){for(var t=[],n=[],r=[],o=e||this.state.targetItems,s=!1,i=0,l=o.length;i<l;i++){var u=o[i],c=!s&&this._isInView(u);c?(s=!0,t.push(u)):n.push(u);var d=i===l-1,f=this._isScrolled();this._isAtBottom()&&this._isInView(u)&&!c&&d&&f&&(n.pop(),n.push.apply(n,(0,a.default)(t)),t=[u],r=this._fillArray(r,!1),c=!0),r.push(c)}return{inView:t,outView:n,viewStatusList:r,scrolledPast:this.props.scrolledPastClassName&&this._getScrolledPast(r)}}},{key:"_isInView",value:function(e){if(!e)return!1;var t,n=this.props,r=n.rootEl,o=n.offset;r&&(t=document.querySelector(r).getBoundingClientRect());var s=e.getBoundingClientRect(),a=r?t.height:window.innerHeight,i=this._getScrollDimension().scrollTop,l=i+a,u=r?s.top+i-t.top+o:s.top+i+o,c=u+e.offsetHeight;return u<l&&c>i}},{key:"_isAtBottom",value:function(){var e=this.props.rootEl,t=this._getScrollDimension(),n=t.scrollTop,r=t.scrollHeight;return n+(e?document.querySelector(e).getBoundingClientRect().height:window.innerHeight)>=r}},{key:"_getScrolledPast",value:function(e){if(!e.some((function(e){return e})))return e;var t=!1;return e.map((function(e){return e&&!t?(t=!0,!1):!t}))}},{key:"_spy",value:function(e){var t=this,n=this._getElemsViewState(e),r=this.state.inViewState;this.setState({inViewState:n.viewStatusList,isScrolledPast:n.scrolledPast},(function(){t._update(r)}))}},{key:"_update",value:function(e){var t,n;(t=this.state.inViewState,n=e,t.length===n.length&&t.every((function(e,t){return e===n[t]})))||this.props.onUpdate(this.state.targetItems[this.state.inViewState.indexOf(!0)])}},{key:"_handleSpy",value:function(){(0,y.default)(this._spy(),100)}},{key:"_initFromProps",value:function(){var e=this._initSpyTarget(this.props.items);this.setState({targetItems:e}),this._spy(e)}},{key:"offEvent",value:function(){(this.props.rootEl?document.querySelector(this.props.rootEl):window).removeEventListener("scroll",this._handleSpy)}},{key:"onEvent",value:function(){(this.props.rootEl?document.querySelector(this.props.rootEl):window).addEventListener("scroll",this._handleSpy)}},{key:"componentDidMount",value:function(){this._initFromProps(),this.onEvent()}},{key:"componentWillUnmount",value:function(){this.offEvent()}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._initFromProps()}},{key:"render",value:function(){var e=this,t=this.props.componentTag,n=this.props,r=n.children,a=n.className,i=n.scrolledPastClassName,l=n.style,u=0,c=h.default.Children.map(r,(function(t,n){var r;if(!t)return null;var a=t.type,l=i&&e.state.isScrolledPast[n],c=(0,m.default)((r={},(0,s.default)(r,"".concat(t.props.className),t.props.className),(0,s.default)(r,"".concat(e.props.currentClassName),e.state.inViewState[n]),(0,s.default)(r,"".concat(e.props.scrolledPastClassName),l),r));return h.default.createElement(a,(0,o.default)({},t.props,{className:c,key:u++}),t.props.children)})),d=(0,m.default)((0,s.default)({},"".concat(a),a));return h.default.createElement(t,{className:d,style:l},c)}}]),t}(h.default.Component);t.Z=v},62470:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){var o=+new Date;!!t&&o<t+r?(clearTimeout(n),n=setTimeout((function(){t=o,e()}),r)):(t=o,e())}};t.default=n},45326:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(87329),o=n(67294),s=n(71394),a=n(19244),i=n(14266),l=n(60534),u=function(e){var t,n=e.body,u=e.sticky,c=void 0!==u&&u,d=Object.assign({},n),f=[s.RG.HEADING_2,s.RG.HEADING_3,s.RG.HEADING_4],p=d&&d.raw?JSON.parse(d.raw):{},h={nodeType:"document",content:p&&p.content?p.content.filter((function(e){return f.includes(e.nodeType)})):[]};d.raw=JSON.stringify(h);var m=[],y=[],v=function(e,t){switch(m=[].concat((0,r.Z)(m),[(0,l.a)(e)]),t){case s.RG.HEADING_2:case s.RG.HEADING_3:y=[].concat((0,r.Z)(y),[(0,l.a)(e)]);break;case s.RG.HEADING_4:y=[].concat((0,r.Z)(y),[o.createElement("span",{className:"padded",key:e},(0,l.a)(e))])}},g={renderNode:(t={},t[s.RG.HEADING_2]=function(e){return v(e,s.RG.HEADING_2)},t[s.RG.HEADING_3]=function(e){return v(e,s.RG.HEADING_3)},t[s.RG.HEADING_4]=function(e){return v(e,s.RG.HEADING_4)},t)};(0,a.Zm)(d,g);var _=(0,o.useState)([]),S=_[0],E=_[1],N=(0,o.useState)([]),k=N[0],w=N[1],G=(0,o.useState)(""),T=G[0],H=G[1];return(0,o.useEffect)((function(){E(m)}),[]),(0,o.useEffect)((function(){if(S.length){var e=S.map((function(e){return(0,a.Tw)(e)}));w(e)}}),[S]),k.length?o.createElement("nav",{role:"doc-toc",className:" toc "+(c&&"sticky"),"data-testid":"toc"},o.createElement(i.Z,{className:"list-unstyled",offset:100,items:k,currentClassName:"",onUpdate:function(e){return(null==e?void 0:e.id)&&H(null==e?void 0:e.id)}},S.map((function(e,t){var n=(0,a.Tw)(e);return o.createElement("li",{key:t,className:(t<S.length-1?"mb-2":"")+" pl-3 text-secondary "+(T===n?"active":"")},o.createElement("a",{className:"text-gray-300 toc-item",href:"#"+n},y[t]))})))):null}}}]);
//# sourceMappingURL=2b50343c5a5ac24f6dd2d2778fe6b1d3c717cbb1-652adf8db70dadaa1bdb.js.map